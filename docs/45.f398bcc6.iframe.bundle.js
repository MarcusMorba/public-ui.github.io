/*! For license information please see 45.f398bcc6.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"./node_modules/@public-ui/components/dist/esm/kol-input-adapter-leanup.entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"kol_input_adapter_leanup",(function(){return KolInputAdapterLeanup}));var InputControlTypes,t,_index_56929ada_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@public-ui/components/dist/esm/index-56929ada.js"),_dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@public-ui/components/dist/esm/dev.utils-4f23c289.js"),_prop_validators_6dd43868_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@public-ui/components/dist/esm/prop.validators-6dd43868.js");function normalizeSetOfItems(t){return t instanceof SetOf?t.get():Array.isArray(t)?t:[t]}class SetOf{constructor(t){this.items=new Set,this.protectedItems=new Set,this.instancesOf=Array.isArray(t)?t:[t]}get empty(){return 0===this.items.size}get first(){return this.items.size>0?Array.from(this.items)[0]:null}forEach(t){this.items.forEach(t)}filter(t){return Array.from(this.items).filter(t)}find(t){return Array.from(this.items).find(t)}get last(){return this.items.size>0?Array.from(this.items)[this.items.size-1]:null}get length(){return _dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__.e.debug("The attribute ListOf.length is deprecated - please use ListOf.size instead."),this.size}get size(){return this.items.size}add(t,e=!1){return normalizeSetOfItems(t).filter((t=>{let r=!1;return!1===this.has(t)?function isInstanceOf(t,e){return!!Array.isArray(t)&&void 0!==t.find((t=>e instanceof t))}(this.instancesOf,t)?(e&&this.protectedItems.add(t),this.items.add(t),r=!0):_dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__.e.debug("The item does not have a valid instance type.",this):_dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__.e.debug("The item is already in the list.",this),r})).length>0}remove(t){return _dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__.e.debug("The method ListOf.remove() is deprecated - please use ListOf.delete() instead."),this.delete(t)}delete(t){return normalizeSetOfItems(t).filter((t=>{let e=!1;return!1===this.protectedItems.has(t)?this.items.has(t)?(this.items.delete(t),e=!0):_dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__.e.debug("The item is not in the list.",this):_dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__.e.debug("The item is protected and cannot be removed.",this),e})).length>0}set(t,e=!1){const r=this.clear(),s=this.add(t,e);return r||s}get(t){return!1===isNaN(t)&&"number"==typeof t?Array.from(this.items).slice(0,t):Array.from(this.items)}clear(){const t=this.items.size;return this.items.forEach((t=>{!1===this.protectedItems.has(t)&&this.items.delete(t)})),t!==this.items.size}contains(t){return _dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__.e.debug("The method ListOf.contains() is deprecated - please use ListOf.has() instead."),this.items.has(t)}has(t){return this.items.has(t)}}class AbstractFormatter{}class FormatHandler extends SetOf{constructor(){super(AbstractFormatter),this.formatters=this}format(t){return this.formatters.forEach((e=>{t=e.format(t)})),t}parse(t){return this.formatters.forEach((e=>{t=e.parse(t)})),t}}class AbstractValidator{constructor(t){this.state={message:"An unknown validation error occurred."},this.message=t}set message(t){"string"==typeof t&&t.length>0?this.state.message=t:_dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__.e.error("The message of the validator should be type of string with a min-length of 1.")}get message(){return this.state.message}}class ValidationHandler extends SetOf{constructor(){super(AbstractValidator),this.validators=this,this.validators=this}validate(t,e=!1){const r=[];try{this.validators.forEach((s=>{if(!1===s.valid(t)&&(r.push(s.message),!0===e))throw new Error("Only one error is enough. Be quick and stop the execution of other validation functions.")}))}catch(t){}return r}}class AbstractControl{constructor(t){this.changeListeners=new SetOf(Function),this._errors=new Set,this._parentForms=new Set,this._name="unnamed",this._validationHandler=new ValidationHandler,this.name=t}get name(){return this._name}set name(t){if("string"!=typeof t)throw new Error("The name of a control must be a string.");if(!(t.length>0))throw new Error("The name of a control must have a min-length of 1.");this._name=t}get error(){return this._errors.size>0?this._errors.values().next().value:null}getErrors(){return this._errors}get id(){let t=this.name;return this._parentForms.size>0&&(t=`${this._parentForms.values().next().value.id}_${t}`),t}get valid(){return 0===this._errors.size}findMeInParentForm(t){if(this===t)return!0;if(t instanceof FormControl){const e=[];return this._parentForms.forEach((r=>{!0===r.findMeInParentForm(t)&&e.push(r)})),e.length>0}return!1}addParentForm(t){if(!1!==this._parentForms.has(t))throw new Error(`An form control with the name '${t.name}' already exists.`);if(!1!==t.findMeInParentForm(this))throw new Error(`The same form control (${t.name}) leads to a form control loop.`);this._parentForms.add(t)}removeParentForm(t){if(!0!==this._parentForms.has(t))throw new Error(`An form control with the name '${t.name}' does not exists.`);this._parentForms.delete(t)}setValidationHandler(t,e=null){this._validationHandler=t,this.validate(e),this.notify()}validate(t){this._errors.clear(),this._validationHandler.validate(t).forEach((t=>{this._errors.add(t)})),this._parentForms.forEach((t=>{t.validate(t.getData())}))}notify(...t){this.changeListeners.forEach((e=>{e(...t)})),this._parentForms.forEach((t=>{t.notify(t.getData())}))}}(t=InputControlTypes||(InputControlTypes={})).checkbox="checkbox",t.date="date",t.email="email",t.number="number",t.password="password",t.radio="radio",t.select="select",t.slider="slider",t.text="text";class InputControl extends AbstractControl{constructor(t,e){super(t),this._disabled=!1,this._label="",this._mandatory=!1,this._placeholder="",this._readonly=!1,this._type="text",this._value=null,this._oldValue=null,this._formatHandler=new FormatHandler,"object"==typeof e&&null!==e&&(this.disabled=!0===e.disabled,this.label="string"==typeof e.label?e.label:"",this.mandatory=!0===e.mandatory,this.placeholder="string"==typeof e.placeholder?e.placeholder:"",this.readonly=!0===e.disabled,this.type="string"==typeof e.type?e.type:"text",this.value=void 0!==e.value?e.value:null)}get disabled(){return this._disabled}set disabled(t){if("boolean"!=typeof t)throw new Error("The disabled flag of a input control must be a string.");this._disabled=t,this.notify()}get mandatory(){return this._mandatory}set mandatory(t){if("boolean"!=typeof t)throw new Error("The mandatory flag of a input control must be a string.");this._mandatory=t,this.notify()}get readonly(){return this._readonly}set readonly(t){if("boolean"!=typeof t)throw new Error("The readonly flag of a input control must be a string.");this._readonly=t,this.notify()}get label(){return this._label}set label(t){if("string"!=typeof t)throw new Error("The label of a input control must be a string.");this._label=t,this.notify()}get placeholder(){return this._placeholder}set placeholder(t){if("string"!=typeof t)throw new Error("The placeholder of a input control must be a string.");this._placeholder=t,this.notify()}get type(){return this._type.toString()}set type(t){if("string"!=typeof t)throw new Error("The type of a input control must be a string.");switch(t){case"checkbox":case"date":case"email":case"number":case"password":case"radio":case"select":case"slider":case"text":this._type=t,this.notify();break;default:throw new Error("The type of a input control must be a of the following types: ???.")}}get oldValue(){return this._oldValue}get value(){return this._value}set value(t){this._oldValue=this._value,this._value=t,this.validate(t),this.notify()}get modelValue(){return this.value}set modelValue(t){this.value=t}get viewValue(){return this._formatHandler.format(this.modelValue)}set viewValue(t){this.modelValue=this._formatHandler.parse(t)}notify(){super.notify(this._value,this._oldValue)}setValidationHandler(t){super.setValidationHandler(t,this.value)}setFormatHandler(t){this._formatHandler=t}}class FormControl extends AbstractControl{constructor(){super(...arguments),this.controls=new Set}get disabled(){return 0===Array.from(this.controls).filter((t=>!1===t.disabled)).length}set disabled(t){this.controls.forEach((e=>{e.disabled=t}))}get readonly(){return 0===Array.from(this.controls).filter((t=>!1===t.readonly)).length}set readonly(t){this.controls.forEach((e=>{e.readonly=t}))}get valid(){return super.valid&&0===Array.from(this.controls).filter((t=>!1===t.valid)).length}addControl(t){if(!1!==this.controls.has(t))throw new Error(`A control with the same name '${t.name}' already exists.`);t.addParentForm(this),this.controls.add(t)}removeControl(t){if(!0!==this.controls.has(t))throw new Error(`A control with the name '${t.name}' does not exists.`);t instanceof AbstractControl&&(t.removeParentForm(this),this.controls.delete(t))}getControls(){return Array.from(this.controls)}getControl(t){return Array.from(this.controls).find((e=>e.name===t))}getForms(){return Array.from(this.controls).filter((t=>t instanceof FormControl))}getForm(t){return Array.from(this.getForms()).find((e=>e.name===t))}getInputs(){return Array.from(this.controls).filter((t=>t instanceof InputControl))}getInput(t){return Array.from(this.getInputs()).find((e=>e.name===t))}setData(t){this.controls.forEach((e=>{if(void 0!==t[e.name])if(e instanceof FormControl)e.setData(t[e.name]);else{if(!(e instanceof InputControl))throw new Error("The control is neither an instance of FormControl or InputControl.");e.value=t[e.name]}}))}getData(){const t={};return this.controls.forEach((e=>{if(e instanceof FormControl)t[e.name]=e.getData();else{if(!(e instanceof InputControl))throw new Error("The control is neither an instance of FormControl or InputControl.");t[e.name]=e.value}})),t}setValidationHandler(t){super.setValidationHandler(t)}}new class IbanFormatter extends AbstractFormatter{constructor(){super(...arguments),this.regExp=/([A-Z0-9]{1,4})/gi}format(t){if("string"==typeof t){const e=t.match(this.regExp);if(Array.isArray(e))return null==e?void 0:e.join(" ")}return t}parse(t){return"string"==typeof t?t.replace(/ /g,""):t}};const DEFAULT_REQUIRED_VALIDATOR=new class RequiredValidator extends AbstractValidator{constructor(t="Please enter a value."){super(t)}valid(t){return null!=t&&t.toString().length>0}};class NonRequiredValidator extends AbstractValidator{valid(t){return!1===DEFAULT_REQUIRED_VALIDATOR.valid(t)||this.validate(t)}}class PatternValidator extends NonRequiredValidator{constructor(t,e="Please enter a valid value."){super(e),this._regExp=/^/g,this.regExp=t}set regExp(t){t instanceof RegExp?this._regExp=t:_dev_utils_4f23c289_js__WEBPACK_IMPORTED_MODULE_1__.e.debug("The regExp of the pattern validator should be type of RegExp.")}get regExp(){return this._regExp}validate(t){return this.regExp.test(t)}}const DIGITS_VALIDATION_REGEXP=/^\d+$/;new class DigitsValidator extends PatternValidator{constructor(t="Please enter a number."){super(DIGITS_VALIDATION_REGEXP,t)}};const DEFAULT_INPUT_CONTROL=new InputControl("unknown",{label:""}),KolInputAdapterLeanup=class{constructor(t){Object(_index_56929ada_js__WEBPACK_IMPORTED_MODULE_0__.f)(this,t),this._debounce=250,this._on={},this.state={_control:DEFAULT_INPUT_CONTROL,_debounce:250,_on:{}},this.changeListener=()=>{this.syncControl()},this.onChange=(t,e)=>{"object"==typeof this.state._control&&(this.state._control.viewValue=e),"object"==typeof this.state._on&&null!==this.state._on&&"function"==typeof this.state._on.onChange&&this.state._on.onChange(t,e)},this.syncControl=()=>{this.hostElement instanceof HTMLElement&&(this.propagateControl(this.hostElement,"kol-input-checkbox"),this.propagateControl(this.hostElement,"kol-input-color"),this.propagateControl(this.hostElement,"kol-input-date"),this.propagateControl(this.hostElement,"kol-input-email"),this.propagateControl(this.hostElement,"kol-input-file"),this.propagateControl(this.hostElement,"kol-input-number"),this.propagateControl(this.hostElement,"kol-input-range"),this.propagateControl(this.hostElement,"kol-input-text"),this.propagateControl(this.hostElement,"kol-input-password"),this.propagateControl(this.hostElement,"kol-input-radio"),this.propagateControl(this.hostElement,"kol-input-radio-group"),this.propagateControl(this.hostElement,"kol-select"),this.propagateControl(this.hostElement,"kol-textarea"))},this.catchHostElement=t=>{t instanceof HTMLElement&&(this.hostElement=t,this.syncControl())}}validateControl(t,e){"object"==typeof t&&"object"==typeof t.changeListeners&&"function"==typeof t.changeListeners.has&&"function"==typeof t.changeListeners.add&&("object"==typeof e&&"object"==typeof e.changeListeners&&"function"==typeof e.changeListeners.has&&"function"==typeof e.changeListeners.delete&&!0===e.changeListeners.has(this.changeListener)&&e.changeListeners.delete(this.changeListener),!1===t.changeListeners.has(this.changeListener)&&t.changeListeners.add(this.changeListener),Object(_prop_validators_6dd43868_js__WEBPACK_IMPORTED_MODULE_2__.t)(this,"_control",t),this.syncControl())}validateDebounce(t){Object(_prop_validators_6dd43868_js__WEBPACK_IMPORTED_MODULE_2__.e)(this,"_debounce",t)}validateOn(t){"object"==typeof t&&null!==t&&Object(_prop_validators_6dd43868_js__WEBPACK_IMPORTED_MODULE_2__.t)(this,"_on",t)}componentWillLoad(){this.validateControl(this._control),this.validateDebounce(this._debounce),this.validateOn(this._on)}disconnectedCallback(){"object"==typeof this.state._control&&"object"==typeof this.state._control.changeListeners&&"function"==typeof this.state._control.changeListeners.delete&&this.state._control.changeListeners.delete(this.changeListener)}propagateControl(t,e){t.querySelectorAll(e).forEach((t=>{t instanceof HTMLElement&&(t._checked=!0===this.state._control.value,t._disabled=!0===this.state._control.disabled,t._error="string"==typeof this.state._control.error&&this.state._control.error.length>0?this.state._control.error:"",t._id=this.state._control.id,t._name=this.state._control.name,t._value=this.state._control.viewValue,t._on=Object.assign(Object.assign({},this.state._on),{onChange:this.onChange}),t._required=!0===this.state._control.mandatory,"string"==typeof this.state._control.label&&this.state._control.label.length>0&&(t.innerText=this.state._control.label))}))}render(){return Object(_index_56929ada_js__WEBPACK_IMPORTED_MODULE_0__.d)(_index_56929ada_js__WEBPACK_IMPORTED_MODULE_0__.b,{ref:this.catchHostElement},Object(_index_56929ada_js__WEBPACK_IMPORTED_MODULE_0__.d)("slot",null))}static get watchers(){return{_control:["validateControl"],_debounce:["validateDebounce"],_on:["validateOn"]}}}}}]);
//# sourceMappingURL=45.f398bcc6.iframe.bundle.js.map