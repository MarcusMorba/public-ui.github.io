/*!
 * KoliBri - The accessible HTML-Standard
 */
"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t,o){return e(o={path:t,exports:{},require:function(e,t){return commonjsRequire()}},o.exports),o.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var loglevel=createCommonjsModule((function(e){var t,o;t=commonjsGlobal,o=function(){var e=function(){},t="undefined",o=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function l(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function i(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&o?s:void 0!==console[n]?l(console,n):void 0!==console.log?l(console,"log"):e)}function r(t,o){for(var l=0;l<n.length;l++){var s=n[l];this[s]=l<t?e:this.methodFactory(s,t,o)}this.log=this.debug}function a(e,o,n){return function(){typeof console!==t&&(r.call(this,o,n),this[e].apply(this,arguments))}}function c(e,t,o){return i(e)||a.apply(this,arguments)}function h(e,o,l){var s,i=this;o=null==o?"WARN":o;var a="loglevel";function h(){var e;if(typeof window!==t&&a){try{e=window.localStorage[a]}catch(e){}if(typeof e===t)try{var o=window.document.cookie,n=o.indexOf(encodeURIComponent(a)+"=");-1!==n&&(e=/^([^;]+)/.exec(o.slice(n))[1])}catch(e){}return void 0===i.levels[e]&&(e=void 0),e}}"string"==typeof e?a+=":"+e:"symbol"==typeof e&&(a=void 0),i.name=e,i.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},i.methodFactory=l||c,i.getLevel=function(){return s},i.setLevel=function(o,l){if("string"==typeof o&&void 0!==i.levels[o.toUpperCase()]&&(o=i.levels[o.toUpperCase()]),!("number"==typeof o&&o>=0&&o<=i.levels.SILENT))throw"log.setLevel() called with invalid level: "+o;if(s=o,!1!==l&&function(e){var o=(n[e]||"silent").toUpperCase();if(typeof window!==t&&a){try{return void(window.localStorage[a]=o)}catch(e){}try{window.document.cookie=encodeURIComponent(a)+"="+o+";"}catch(e){}}}(o),r.call(i,o,e),typeof console===t&&o<i.levels.SILENT)return"No console available for logging"},i.setDefaultLevel=function(e){o=e,h()||i.setLevel(e,!1)},i.resetLevel=function(){i.setLevel(o,!1),function(){if(typeof window!==t&&a){try{return void window.localStorage.removeItem(a)}catch(e){}try{window.document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},i.enableAll=function(e){i.setLevel(i.levels.TRACE,e)},i.disableAll=function(e){i.setLevel(i.levels.SILENT,e)};var y=h();null==y&&(y=o),i.setLevel(y,!1)}var y=new h,f={};y.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new h(e,y.getLevel(),y.methodFactory)),t};var m=typeof window!==t?window.log:void 0;return y.noConflict=function(){return typeof window!==t&&window.log===y&&(window.log=m),y},y.getLoggers=function(){return f},y.default=y,y},e.exports?e.exports=o():t.log=o()}));const GLOBAL="object"==typeof window?window:"object"==typeof global?global:"object"==typeof self?self:{};let warrentyWarning=!1;const THEME_NAME_PATTERN=/^[a-z][a-z0-9]{1,}(-[a-z0-9]+)?$/,isThemeNameValid=e=>"string"==typeof e&&THEME_NAME_PATTERN.test(e),validateThemeName=e=>{if(!1===isThemeNameValid(e))throw new Error(`[Theming] The theme identifier "${"string"==typeof e?e:""}" (Type: ${typeof e}) is not valid. Please use only follow this pattern: /^[a-z][a-z0-9]{1,}(-[a-z0-9]+)?$/`)},patchThemeTag=(e,t,o)=>{validateThemeName(e),!1===warrentyWarning&&(warrentyWarning=!0,loglevel.warn(`[Theming] The theme process is locked. This means that the theme "${e}" should not be patched.\n\nimport { register } from '@a11y-ui/core';\nimport { defineCustomElements } from '...';\nimport { THEME } from '...';\n\nregister(THEME, defineCustomElements)\n\t.then(() => {\n\t\tconst htmlDivElement: HTMLDivElement | null = document.querySelector<HTMLDivElement>('div#app');\n    if (htmlDivElement instanceof HTMLDivElement) {\n      const root = createRoot(htmlDivElement);\n      root.render(<AppComponent />);\n    }\n  })\n  .catch(console.warn);`)),"object"==typeof GLOBAL.A11yUi&&null!==GLOBAL.A11yUi||(GLOBAL.A11yUi={}),"object"!=typeof GLOBAL.A11yUi||null===GLOBAL.A11yUi||"object"==typeof GLOBAL.A11yUi.Themes&&null!==GLOBAL.A11yUi.Themes||(GLOBAL.A11yUi.Themes={}),"object"!=typeof GLOBAL.A11yUi||null===GLOBAL.A11yUi||"object"!=typeof GLOBAL.A11yUi.Themes||null===GLOBAL.A11yUi.Themes||"object"==typeof GLOBAL.A11yUi.Themes[e]&&null!==GLOBAL.A11yUi.Themes[e]||(GLOBAL.A11yUi.Themes[e]={}),"object"==typeof GLOBAL.A11yUi&&null!==GLOBAL.A11yUi&&"object"==typeof GLOBAL.A11yUi.Themes&&null!==GLOBAL.A11yUi.Themes&&"object"==typeof GLOBAL.A11yUi.Themes[e]&&null!==GLOBAL.A11yUi.Themes[e]&&(GLOBAL.A11yUi.Themes[e][t]=o)},patchTheme=(e,t)=>{if(validateThemeName(e),"object"==typeof t&&null!==t){Object.getOwnPropertyNames(t).forEach((o=>{const n=t[o];"string"==typeof n&&n.length>0&&patchThemeTag(e,o,n)}))}return e},getThemeNode=e=>{if(e instanceof HTMLElement){if("string"==typeof e.dataset.theme)return e;{let t=e.parentNode;for(;t instanceof ShadowRoot;)t=t.host;return getThemeNode(t)}}return null},getEncroachCss=e=>"false"===e.themeEncroachCss&&"false"===e.themeReset&&("string"==typeof e.themeEncroachCssMode&&"after"===e.themeEncroachCssMode||"before"===e.themeEncroachCssMode?{mode:e.themeEncroachCssMode}:{mode:"after"}),isTheCurrentThemeConfigValid=()=>"object"==typeof GLOBAL.A11yUi&&null!==GLOBAL.A11yUi&&"object"==typeof GLOBAL.A11yUi.Theme&&null!==GLOBAL.A11yUi.Theme&&"boolean"==typeof GLOBAL.A11yUi.Theme.cache&&"object"==typeof GLOBAL.A11yUi.Theme.encroachCss&&null!==typeof GLOBAL.A11yUi.Theme.encroachCss&&"string"==typeof GLOBAL.A11yUi.Theme.encroachCss.mode&&"string"==typeof GLOBAL.A11yUi.Theme.name,getThemeDetails=e=>{if("object"==typeof GLOBAL.A11yUi&&null!==GLOBAL.A11yUi&&"object"==typeof GLOBAL.A11yUi.Theme&&null!==GLOBAL.A11yUi.Theme&&"boolean"==typeof GLOBAL.A11yUi.Theme.cache&&"object"==typeof GLOBAL.A11yUi.Theme.encroachCss&&null!==typeof GLOBAL.A11yUi.Theme.encroachCss&&"string"==typeof GLOBAL.A11yUi.Theme.encroachCss.mode&&"string"==typeof GLOBAL.A11yUi.Theme.name)return GLOBAL.A11yUi.Theme;{const o=getThemeNode(e),n={cache:!0,encroachCss:{mode:"after"},name:null};return o instanceof HTMLElement&&(n.cache="false"!==o.dataset.themeCache,n.encroachCss="false"===(t=o.dataset).themeEncroachCss&&"false"===t.themeReset&&("string"==typeof t.themeEncroachCssMode&&"after"===t.themeEncroachCssMode||"before"===t.themeEncroachCssMode?{mode:t.themeEncroachCssMode}:{mode:"after"}),n.name=o.dataset.theme||null),n}var t},CSS_PROPERTIES_REGISTERED=new Set,CSS_STYLE_SHEETS=new Map,HTML_STYLE_ELEMENTS=new Map,REGEX_CSS_PROPERTIES=/--[^;]+/g,REGEX_SPLT_CSS_PROPERTY=/:/,getCssStyleSheet=(e,t,o)=>{if(!0===e&&CSS_STYLE_SHEETS.has(t)&&CSS_STYLE_SHEETS.get(t)?.has(o))return CSS_STYLE_SHEETS.get(t)?.get(o);if(!0===e&&HTML_STYLE_ELEMENTS.has(t)&&HTML_STYLE_ELEMENTS.get(t)?.has(o))return HTML_STYLE_ELEMENTS.get(t)?.get(o);if("object"==typeof GLOBAL.A11yUi&&null!==GLOBAL.A11yUi&&"object"==typeof GLOBAL.A11yUi.Themes&&null!==GLOBAL.A11yUi.Themes&&"object"==typeof GLOBAL.A11yUi.Themes[t]&&null!==GLOBAL.A11yUi.Themes[t]&&"string"==typeof GLOBAL.A11yUi.Themes[t][o]){if(("GLOBAL"===o||"PROPERTIES"===o)&&!1===CSS_PROPERTIES_REGISTERED.has(t)){let e=GLOBAL.A11yUi.Themes[t][o].match(REGEX_CSS_PROPERTIES);if(Array.isArray(e)){e=e.filter((e=>REGEX_SPLT_CSS_PROPERTY.test(e)));const o=document.createElement("style");o.innerHTML=`.${t} {${e.join(";")}}`,document.querySelector("head")?.appendChild(o)}CSS_PROPERTIES_REGISTERED.add(t)}let n;try{n=new CSSStyleSheet,"function"==typeof n.replaceSync&&n.replaceSync(GLOBAL.A11yUi.Themes[t][o]),!0===e&&(!1===CSS_STYLE_SHEETS.has(t)&&CSS_STYLE_SHEETS.set(t,new Map),CSS_STYLE_SHEETS.get(t)?.set(o,n))}catch(e){n=document.createElement("style"),n.innerHTML=GLOBAL.A11yUi.Themes[t][o]}return n}return null},removeStyle=e=>{for(const t of Array.from(e.childNodes)){if(!(t instanceof HTMLElement&&"STYLE"===t.tagName))break;e.removeChild(t)}},GLOBAL_A11Y_STYLE="* {\n  font-size: inherit;\n  hyphens: auto;\n  letter-spacing: inherit;\n  word-break: break-word;\n  word-spacing: inherit;\n}",patchAdopted=(e,t,o,n)=>{const l=setTimeout((()=>{if(clearTimeout(l),e.classList.contains("hydrated")){removeStyle(t);const l=new CSSStyleSheet;"function"==typeof l.replaceSync&&l.replaceSync(GLOBAL_A11Y_STYLE),o.unshift(l),t.adoptedStyleSheets=o,e.style.display=n}else patchAdopted(e,t,o,n)}),25)},patchStyle=(e,t,o,n)=>{const l=setTimeout((()=>{if(clearTimeout(l),e.classList.contains("hydrated")){removeStyle(t);const l=document.createElement("style");l.innerHTML=GLOBAL_A11Y_STYLE,o.unshift(l);const s=t.firstChild;o.forEach((e=>{s instanceof HTMLElement?t.insertBefore(e,s):t.appendChild(e)})),e.style.display=n}else patchStyle(e,t,o,n)}),25)},addEncroachCssStyleSheet=(e,t)=>{e.adoptedStyleSheets?.forEach((e=>{t.push(e)}))},addEncroachCssStyleElement=(e,t)=>{for(const o of Array.from(e.childNodes)){if(!(o instanceof HTMLStyleElement))break;t.push(o)}},setThemeStyle=(e,t)=>{const o=t.cache,n=t.encroachCss,l=t.name||"default",s=getCssStyleSheet(o,l,"GLOBAL"),i=getCssStyleSheet(o,l,e.tagName),r=e.shadowRoot;if(i instanceof CSSStyleSheet&&i.cssRules.length>0){const t=[];!1!==n&&"before"===n?.mode&&addEncroachCssStyleSheet(r,t),s instanceof CSSStyleSheet&&s.cssRules.length>0&&!1===t.includes(s)&&t.push(s),i instanceof CSSStyleSheet&&i.cssRules.length>0&&!1===t.includes(i)&&t.push(i),!1!==n&&"after"===n?.mode&&addEncroachCssStyleSheet(r,t);const o=e.style.display;e.style.display="none",patchAdopted(e,r,t,o)}else if(i instanceof HTMLStyleElement&&i.innerHTML.length>0){const t=[];!1!==n&&"before"===n?.mode&&addEncroachCssStyleElement(r,t),s instanceof HTMLStyleElement&&s.innerHTML.length>0&&!1===t.includes(s)&&t.push(s),i instanceof HTMLStyleElement&&i.innerHTML.length>0&&!1===t.includes(i)&&t.push(i),!1!==n&&"after"===n?.mode&&addEncroachCssStyleElement(r,t);const o=e.style.display;e.style.display="none",patchStyle(e,r,t,o)}};exports.getThemeDetails=getThemeDetails,exports.patchTheme=patchTheme,exports.patchThemeTag=patchThemeTag,exports.setThemeStyle=setThemeStyle;