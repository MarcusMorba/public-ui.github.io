/*!
 * KoliBri - The accessible HTML-Standard
 */
var e,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(function(e){var t,o;t=n,o=function(){var e=function(){},t="undefined",o=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function l(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&o?i:void 0!==console[n]?l(console,n):void 0!==console.log?l(console,"log"):e)}function r(t,o){for(var l=0;l<n.length;l++){var i=n[l];this[i]=l<t?e:this.methodFactory(i,t,o)}this.log=this.debug}function c(e,o,n){return function(){typeof console!==t&&(r.call(this,o,n),this[e].apply(this,arguments))}}function a(e,t,o){return s(e)||c.apply(this,arguments)}function y(e,o,l){var i,s=this;o=null==o?"WARN":o;var c="loglevel";function y(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var o=window.document.cookie,n=o.indexOf(encodeURIComponent(c)+"=");-1!==n&&(e=/^([^;]+)/.exec(o.slice(n))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=l||a,s.getLevel=function(){return i},s.setLevel=function(o,l){if("string"==typeof o&&void 0!==s.levels[o.toUpperCase()]&&(o=s.levels[o.toUpperCase()]),!("number"==typeof o&&o>=0&&o<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+o;if(i=o,!1!==l&&function(e){var o=(n[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=o)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+o+";"}catch(e){}}}(o),r.call(s,o,e),typeof console===t&&o<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){o=e,y()||s.setLevel(e,!1)},s.resetLevel=function(){s.setLevel(o,!1),function(){if(typeof window!==t&&c){try{return void window.localStorage.removeItem(c)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var f=y();null==f&&(f=o),s.setLevel(f,!1)}var f=new y,h={};f.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=h[e];return t||(t=h[e]=new y(e,f.getLevel(),f.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return f.noConflict=function(){return typeof window!==t&&window.log===f&&(window.log=p),f},f.getLoggers=function(){return h},f.default=f,f},e.exports?e.exports=o():t.log=o()}(e={path:void 0,exports:{},require:function(){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),e.exports);const o="object"==typeof window?window:"object"==typeof global?global:"object"==typeof self?self:{};let i=!1;const r=/^[a-z][a-z0-9]{1,}(-[a-z0-9]+)?$/,f=e=>{if(!1===(e=>"string"==typeof e&&r.test(e))(e))throw new Error(`[Theming] The theme identifier "${"string"==typeof e?e:""}" (Type: ${typeof e}) is not valid. Please use only follow this pattern: /^[a-z][a-z0-9]{1,}(-[a-z0-9]+)?$/`)},l=(e,n,l)=>{f(e),!1===i&&(i=!0,t.warn(`[Theming] The theme process is locked. This means that the theme "${e}" should not be patched.\n\nimport { register } from '@a11y-ui/core';\nimport { defineCustomElements } from '...';\nimport { THEME } from '...';\n\nregister(THEME, defineCustomElements)\n\t.then(() => {\n\t\tconst htmlDivElement: HTMLDivElement | null = document.querySelector<HTMLDivElement>('div#app');\n    if (htmlDivElement instanceof HTMLDivElement) {\n      const root = createRoot(htmlDivElement);\n      root.render(<AppComponent />);\n    }\n  })\n  .catch(console.warn);`)),"object"==typeof o.A11yUi&&null!==o.A11yUi||(o.A11yUi={}),"object"!=typeof o.A11yUi||null===o.A11yUi||"object"==typeof o.A11yUi.Themes&&null!==o.A11yUi.Themes||(o.A11yUi.Themes={}),"object"!=typeof o.A11yUi||null===o.A11yUi||"object"!=typeof o.A11yUi.Themes||null===o.A11yUi.Themes||"object"==typeof o.A11yUi.Themes[e]&&null!==o.A11yUi.Themes[e]||(o.A11yUi.Themes[e]={}),"object"==typeof o.A11yUi&&null!==o.A11yUi&&"object"==typeof o.A11yUi.Themes&&null!==o.A11yUi.Themes&&"object"==typeof o.A11yUi.Themes[e]&&null!==o.A11yUi.Themes[e]&&(o.A11yUi.Themes[e][n]=l)},c=(e,t)=>(f(e),"object"==typeof t&&null!==t&&Object.getOwnPropertyNames(t).forEach((o=>{const n=t[o];"string"==typeof n&&n.length>0&&l(e,o,n)})),e),s=e=>{if(e instanceof HTMLElement){if("string"==typeof e.dataset.theme)return e;{let t=e.parentNode;for(;t instanceof ShadowRoot;)t=t.host;return s(t)}}return null},u=e=>{if("object"==typeof o.A11yUi&&null!==o.A11yUi&&"object"==typeof o.A11yUi.Theme&&null!==o.A11yUi.Theme&&"boolean"==typeof o.A11yUi.Theme.cache&&"object"==typeof o.A11yUi.Theme.encroachCss&&null!==typeof o.A11yUi.Theme.encroachCss&&"string"==typeof o.A11yUi.Theme.encroachCss.mode&&"string"==typeof o.A11yUi.Theme.name)return o.A11yUi.Theme;{const o=s(e),n={cache:!0,encroachCss:{mode:"after"},name:null};return o instanceof HTMLElement&&(n.cache="false"!==o.dataset.themeCache,n.encroachCss="false"===(t=o.dataset).themeEncroachCss&&"false"===t.themeReset&&("string"==typeof t.themeEncroachCssMode&&"after"===t.themeEncroachCssMode||"before"===t.themeEncroachCssMode?{mode:t.themeEncroachCssMode}:{mode:"after"}),n.name=o.dataset.theme||null),n}var t},a=new Set,y=new Map,p=new Map,d=/--[^;]+/g,w=/:/,h=(e,t,n)=>{if(!0===e&&y.has(t)&&y.get(t)?.has(n))return y.get(t)?.get(n);if(!0===e&&p.has(t)&&p.get(t)?.has(n))return p.get(t)?.get(n);if("object"==typeof o.A11yUi&&null!==o.A11yUi&&"object"==typeof o.A11yUi.Themes&&null!==o.A11yUi.Themes&&"object"==typeof o.A11yUi.Themes[t]&&null!==o.A11yUi.Themes[t]&&"string"==typeof o.A11yUi.Themes[t][n]){if(("GLOBAL"===n||"PROPERTIES"===n)&&!1===a.has(t)){let e=o.A11yUi.Themes[t][n].match(d);if(Array.isArray(e)){e=e.filter((e=>w.test(e)));const o=document.createElement("style");o.innerHTML=`.${t} {${e.join(";")}}`,document.querySelector("head")?.appendChild(o)}a.add(t)}let l;try{l=new CSSStyleSheet,"function"==typeof l.replaceSync&&l.replaceSync(o.A11yUi.Themes[t][n]),!0===e&&(!1===y.has(t)&&y.set(t,new Map),y.get(t)?.set(n,l))}catch(e){l=document.createElement("style"),l.innerHTML=o.A11yUi.Themes[t][n]}return l}return null},m=e=>{for(const t of Array.from(e.childNodes)){if(!(t instanceof HTMLElement&&"STYLE"===t.tagName))break;e.removeChild(t)}},b="* {\n  font-size: inherit;\n  hyphens: auto;\n  letter-spacing: inherit;\n  word-break: break-word;\n  word-spacing: inherit;\n}",g=(e,t,o,n)=>{const l=setTimeout((()=>{if(clearTimeout(l),e.classList.contains("hydrated")){m(t);const l=new CSSStyleSheet;"function"==typeof l.replaceSync&&l.replaceSync(b),o.unshift(l),t.adoptedStyleSheets=o,e.style.display=n}else g(e,t,o,n)}),25)},v=(e,t,o,n)=>{const l=setTimeout((()=>{if(clearTimeout(l),e.classList.contains("hydrated")){m(t);const l=document.createElement("style");l.innerHTML=b,o.unshift(l);const i=t.firstChild;o.forEach((e=>{i instanceof HTMLElement?t.insertBefore(e,i):t.appendChild(e)})),e.style.display=n}else v(e,t,o,n)}),25)},T=(e,t)=>{e.adoptedStyleSheets?.forEach((e=>{t.push(e)}))},E=(e,t)=>{for(const o of Array.from(e.childNodes)){if(!(o instanceof HTMLStyleElement))break;t.push(o)}},S=(e,t)=>{const o=t.cache,n=t.encroachCss,l=t.name||"default",i=h(o,l,"GLOBAL"),s=h(o,l,e.tagName),r=e.shadowRoot;if(s instanceof CSSStyleSheet&&s.cssRules.length>0){const t=[];!1!==n&&"before"===n?.mode&&T(r,t),i instanceof CSSStyleSheet&&i.cssRules.length>0&&!1===t.includes(i)&&t.push(i),s instanceof CSSStyleSheet&&s.cssRules.length>0&&!1===t.includes(s)&&t.push(s),!1!==n&&"after"===n?.mode&&T(r,t);const o=e.style.display;e.style.display="none",g(e,r,t,o)}else if(s instanceof HTMLStyleElement&&s.innerHTML.length>0){const t=[];!1!==n&&"before"===n?.mode&&E(r,t),i instanceof HTMLStyleElement&&i.innerHTML.length>0&&!1===t.includes(i)&&t.push(i),s instanceof HTMLStyleElement&&s.innerHTML.length>0&&!1===t.includes(s)&&t.push(s),!1!==n&&"after"===n?.mode&&E(r,t);const o=e.style.display;e.style.display="none",v(e,r,t,o)}};export{l as a,u as g,c as p,S as s};